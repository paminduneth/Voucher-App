<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generated Voucher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body class="bg-blue-50 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-6">
            <button id="downloadBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition">
                Download Voucher as PDF
            </button>
        </div>

        <div id="voucherContent" class="bg-white shadow-lg">
            <header class="bg-blue-900 text-white p-6 flex items-center justify-between">
                <div class="flex items-center">
                    <img src="WhatsApp Image 2025-06-03 at 22.38.57_bae8e882.jpg" alt="Colombo Odyssey Logo" class="w-20 h-20 mr-6">
                    <div>
                        <h1 class="text-2xl font-bold">COLOMBO ODYSSEY (PVT) LTD - SRI LANKA</h1>
                        <p class="text-sm">Email: odysseycolombo@gmail.com</p>
                        <p class="text-sm">Contact us: Finance +94772854151 / pamindu +94772779405</p>
                    </div>
                </div>
            </header>

            <h2 class="text-xl font-bold p-6 text-gray-800 border-b-2 border-gray-300" id="hotelTitle"></h2>

            <table class="w-full border-collapse text-gray-800">
                <tbody>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100 w-1/3">Tour Number</td>
                        <td class="p-3" id="tourNumber"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Check In Date</td>
                        <td class="p-3" id="checkInDate"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Nights</td>
                        <td class="p-3" id="nights"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Check-Out Date</td>
                        <td class="p-3" id="checkOutDate"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Meal Plan</td>
                        <td class="p-3" id="mealPlan"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Pax Count</td>
                        <td class="p-3" id="paxCount"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Room Type</td>
                        <td class="p-3" id="roomType"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Market</td>
                        <td class="p-3" id="market"></td>
                    </tr>
                    <tr class="border-b">
                        <td class="p-3 font-semibold bg-gray-100">Client's Name</td>
                        <td class="p-3" id="clientName"></td>
                    </tr>
                </tbody>
            </table>

            <div class="p-6 space-y-3 text-gray-800 text-base">
                <p id="rateDetails" class="font-medium"></p>
                <p id="additionalNotes"></p>
                <p class="text-red-600 font-bold">â€¢ <span id="request"></span></p>
            </div>
        </div>
    </div>

    <script>
        const data = JSON.parse(sessionStorage.getItem('voucherData'));
        if (data) {
            document.getElementById('tourNumber').textContent = data.tourNumber || '';
            document.getElementById('checkInDate').textContent = data.checkInDate || '';
            document.getElementById('nights').textContent = data.nights || '';
            document.getElementById('checkOutDate').textContent = data.checkOutDate || '';
            document.getElementById('mealPlan').textContent = data.mealPlan || '';
            document.getElementById('paxCount').textContent = data.paxCount || '';
            document.getElementById('roomType').textContent = data.roomType || '';
            document.getElementById('market').textContent = data.market || '';
            document.getElementById('clientName').textContent = data.clientName || '';
            document.getElementById('rateDetails').textContent = data.rateDetails || '';
            document.getElementById('additionalNotes').textContent = data.additionalNotes || '';
            document.getElementById('request').textContent = data.request || '';

            const hotelName = data.hotelName || 'Hotel';
            document.getElementById('hotelTitle').textContent = `${hotelName}: Booking Confirmation`;
        } else {
            alert('No voucher data found. Please fill the form first.');
            window.location.href = 'index.html';
        }

        document.getElementById('downloadBtn').addEventListener('click', function () {
            const element = document.getElementById('voucherContent');
            const hotelName = data.hotelName || 'Hotel';
            const tourNum = data.tourNumber || 'Booking';

            const opt = {
                margin:       0.5,
                filename:     `Voucher_${tourNum}_${hotelName.replace(/ /g, '_')}.pdf`,
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2 },
                jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
            };

            html2pdf().set(opt).from(element).save();
        });
    </script>
</body>
</html>